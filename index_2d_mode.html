<html> 
<head> 
    <title>TSUKBG</title> 

    <link rel="stylesheet" type="text/css" href="style.css" media="all"> 
</head> 

<body> 

<script src="js/three.min.js"></script> 
<script src="js/TrackballControls.js"></script>
<script src="js/Detector.js"></script>
<script src="js/stats.min.js"></script>
<script>

    // --allow-file-access-from-files should be added when starting chrome
    // so local files can be loaded. This is because of security restrictions

    var renderer, camera, controls, scene, pointLight, planet, sky, stats;
    var mouseDown = false, mouseX = 0, mouseY = 0;

    init();
    mainLoop();

    function init() {
        /////////////////////////////////////////////////////////////////////////////////////////////////////////

        //renderer
        renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        /////////////////////////////////////////////////////////////////////////////////////////////////////////

        //scene
        scene = new THREE.Scene();

        /////////////////////////////////////////////////////////////////////////////////////////////////////////

        //camera
        camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 1000);
        camera.position.set(80, -40, 200);

        scene.add(camera);

        /////////////////////////////////////////////////////////////////////////////////////////////////////////

        //movement with the mouse. Dragging the right mouse button moves the camera
        controls = new THREE.TrackballControls(camera,renderer.domElement);
        //controls.addEventListener('change', Render);
        controls.minDistance = 50;
        controls.maxDistance = 300;
        controls.zoomSpeed = 0.7;
        controls.noRotate = true;
        //the camera should look at (80,-40,0)
        controls.target.set(80, -40, 0);

       
        /////////////////////////////////////////////////////////////////////////////////////////////////////////

        var defaultSquareTexture = THREE.ImageUtils.loadTexture('textures/NASA_world.jpg');

        var defaultSquareMaterial = new THREE.MeshPhongMaterial({ map: defaultSquareTexture });

        var geometry = new THREE.PlaneGeometry(1000, 500, 1, 1);

        planet = new THREE.Mesh(geometry, defaultSquareMaterial);

        scene.add(planet);











        //// the planet
        //var planetGeometry = new THREE.SphereGeometry(10, 100, 100);

        //var planetMaterial = new THREE.MeshPhongMaterial;

        //planetMaterial.map = THREE.ImageUtils.loadTexture('textures/NASA_world.jpg');
        ////bump map is not working
        ////planetMaterial.bumpMap = THREE.ImageUtils.loadTexture('textures/elev_bump_4k.jpg');
        ////planetMaterial.bumpScale = 2;
        //planetMaterial.specularMap = THREE.ImageUtils.loadTexture('textures/water_4k.png');
        //planetMaterial.specular = new THREE.Color('grey');

        //planet = new THREE.Mesh(planetGeometry, planetMaterial);
        //scene.add(planet);

        /////////////////////////////////////////////////////////////////////////////////////////////////////////     

        // ambient light
        scene.add(new THREE.AmbientLight(0xffffff));

        var light = new THREE.DirectionalLight(0xffffff, 0.2);
        light.position.set(0, 50, 0);
        scene.add(light);

        /////////////////////////////////////////////////////////////////////////////////////////////////////////

        //listeners for mouse move mouse down and mouse up

       // document.body.addEventListener('mousemove', function (e) { onMouseMove(e); }, false);
       // document.body.addEventListener('mousedown', function (e) { onMouseDown(e); }, false);
       // document.body.addEventListener('mouseup', function (e) { onMouseUp(e); }, false);


        /////////////////////////////////////////////////////////////////////////////////////////////////////////

        //statistics
        stats = new Stats();
        stats.setMode(0); // 0: fps, 1: ms

        // align down left
        stats.domElement.style.position = 'absolute';
        stats.domElement.style.left = '0px';
        stats.domElement.style.bottom = '0px';

        //document.body.appendChild(stats.domElement);
    }


    function onMouseMove(event) {
        if (!mouseDown) {
            return;
        }

        var deltaX = event.clientX - mouseX;
        var deltaY = event.clientY - mouseY;
        mouseX = event.clientX;
        mouseY = event.clientY;

        rotatePlanet(deltaX, deltaY);
    }

    function onMouseDown(event) {
        mouseDown = true;
        mouseX = event.clientX;
        mouseY = event.clientY;
    }

    function onMouseUp(event) {
        mouseDown = false;
    }

    function rotatePlanet(deltaX, deltaY) {
        planet.rotation.y += deltaX / 300;
        planet.rotation.x += deltaY / 300;
    }


    function mainLoop() {
        requestAnimationFrame(mainLoop);
        stats.begin();

        update();
        render();

        stats.end();
    }

    function update()
    {
        if (camera.position.x <= 120) {
            controls.update();
        }
        else {

            camera.position.setX(120)
        }
    }

    function render() {
        renderer.render(scene, camera);
    }
</script>


    <!--search form-->

     <div id="searchDiv" style="position:absolute;top:0;left:0;margin-top:50px;margin-left:50px;font-size:15pt;font-family:'Times New Roman';">

         <form id="searchForm">
          
            <!-- Enter starting cell x coordinate <br/>  -->
             <input name="startX" id="search" value="" style="font-size:15pt;font-family:'Times New Roman'"/>

            <input type="button" style="font-size:15pt;font-family:'Times New Roman';" value="Search" />
        </form>

    </div>

     <!--Login button-->

    <div style="position:absolute;top:0;right:0;margin-top:50px;margin-right:100px;font-size:15pt;font-family:'Times New Roman';">

        <form action="#openLogin">
            <input type="submit" name ="login" id ="login" style="font-size:15pt;font-family:'Times New Roman'" value ="Login">
        </form>
 
    </div>

    <!--Login dialog-->

     <div id="openLogin" class="loginDialog">

         <div>
             <a href="#closeButtonLogin" title="Close" class="closeButtonLogin">X</a>

             <div style="position:relative;left:16%;">
                 <form id="Form1">
           
                     <br /><br />

                     <label style="font-size:25pt;font-family:'Times New Roman'">Login </label>
                     
                     <br /><br />

                     Username <br/> 
                     <input name="username" id="username" value="" style="font-size:15pt;font-family:'Times New Roman'"/>
                     <br /><br />

                     Password <br/>
                     <input name="password" id="password" value="" style="font-size:15pt;font-family:'Times New Roman'"/>
                     <br /><br />

                    <input type="button" style="font-size:15pt;font-family:'Times New Roman'" value="Login" />

                </form>

            </div>
            

            </div>

    </div>

    <!--Register button-->

    <div style="position:absolute;top:0;right:0;margin-top:50px;margin-right:200px;font-size:15pt;font-family:'Times New Roman';">

        <form action="#openRegister">
            <input type="submit" name ="register" id ="Submit1" style="font-size:15pt;font-family:'Times New Roman'" value ="Register">
        </form>
 
    </div>

    <!--Register dialog-->

     <div id="openRegister" class="registerDialog">

         <div>
             <a href="#closeButtonRegister" title="Close" class="closeButtonRegister">X</a>

             <div style="position:relative;left:16%;">
                 <form id="Form2">
           
                     <br /><br />

                     <label style="font-size:25pt;font-family:'Times New Roman'">Register</label>
                     
                     <br /><br />

                     Email <br/> 
                     <input name="email" id="Text3" value="" style="font-size:15pt;font-family:'Times New Roman'"/>
                     <br /><br />

                     Username <br/> 
                     <input name="username" id="Text1" value="" style="font-size:15pt;font-family:'Times New Roman'"/>
                     <br /><br />

                     Password <br/>
                     <input name="password" id="Text2" value="" style="font-size:15pt;font-family:'Times New Roman'"/>
                     <br /><br />

                     Repeat password <br/>
                     <input name="repeatPassword" id="Text4" value="" style="font-size:15pt;font-family:'Times New Roman'"/>
                     <br /><br />

                    <input type="button" style="font-size:15pt;font-family:'Times New Roman'" value="Register" />

                </form>

            </div>
            

            </div>

    </div>

     <!--3d mode button-->

    <div style="position:absolute;bottom:0;left:0;margin-bottom:10px;margin-left:50px;font-size:15pt;font-family:'Times New Roman';">

        <form action="index.html">
            <input type="submit" name ="register" id ="Submit2" style="font-size:15pt;font-family:'Times New Roman'" value ="Go to 3D mode">
        </form>
 
    </div>




</form>

</body> 

</html>